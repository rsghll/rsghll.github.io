<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="技术点, Python">
    <meta name="description" content="你笑的时候是真的在笑嘛？">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>技术点 | Python</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Python" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Python</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Python</div>
        <div class="logo-desc">
            
            你笑的时候是真的在笑嘛？
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/10.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">技术点</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Typora/">
                                <span class="chip bg-color">Typora</span>
                            </a>
                        
                            <a href="/tags/Markdown/">
                                <span class="chip bg-color">Markdown</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Django/" class="post-category">
                                Django
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-10-11
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="1-1-项目技术点剖析"><a href="#1-1-项目技术点剖析" class="headerlink" title="1.1 项目技术点剖析"></a>1.1 项目技术点剖析</h1><h3 id="1-（金禹含）使用Redis实现分布式部署单点登录（单点登录第一种方法：redis分布式存储解决方案）"><a href="#1-（金禹含）使用Redis实现分布式部署单点登录（单点登录第一种方法：redis分布式存储解决方案）" class="headerlink" title="1.（金禹含）使用Redis实现分布式部署单点登录（单点登录第一种方法：redis分布式存储解决方案）"></a>1.（金禹含）使用Redis实现分布式部署单点登录（单点登录第一种方法：redis分布式存储解决方案）</h3><p>因为这个项目是一个分布式部署的项目，而且我们采用的是nginx负载均衡的策略，导致了每一个服务器都需要开辟一个空间来进行用户信息的维护，消耗了大量的资源，所以，我当时使用到了Redis来作为维护用户信息的空间，将用户登录的信息存入Redis中，并且在存入时设置key的过期时间，所有的服务器共用一个Redis，每次进行操作时只需要去Redis中去判断这个用户是否存在，存在的话就说明这个用户现在是登录状态，不存在就说明这个用户没有登录，或者登录已经失效，让用户进行重新登录。</p>
<ul>
<li>为什么会存在单点登录的问题<ul>
<li><strong>session默认是存储在当前服务器的内存中</strong>，如果是集群，那么只有登录那台机器的内存中才有这个session</li>
<li>比如说我在A机器登录，B机器是没有这个session存在的，所以需要重新验证</li>
</ul>
</li>
<li>如何解决这个单点登录问题<ul>
<li>不管在那一台web服务器登录，都会把token值存放到我们的一个集中管理的redis服务器中</li>
<li>但客户端携带token验证的时候，会先从redis中获取，就实现单点登录</li>
</ul>
</li>
<li>现实举例<ul>
<li>比如你写的一个tornado项目，分别部署到A，B两台机器上</li>
<li>如果直接使用session，那么如果在A机器登录，token只会在A服务器的内存</li>
<li>因为请求会封不到A，b连个机器，如果这个请求到了B机器，B的内存中没有就会让重新登录</li>
<li>所以登录A机器的时候我们应该把token值写入到redis中，A/B机器登录，都从redis中获取token进行校验</li>
</ul>
</li>
</ul>
<h3 id="2-（刘香鹏）基于JWT技术及RSA非对称加密实现真正无状态的单点登录（单点等第二种方法：JWT）"><a href="#2-（刘香鹏）基于JWT技术及RSA非对称加密实现真正无状态的单点登录（单点等第二种方法：JWT）" class="headerlink" title="2.（刘香鹏）基于JWT技术及RSA非对称加密实现真正无状态的单点登录（单点等第二种方法：JWT）"></a>2.（刘香鹏）基于JWT技术及RSA非对称加密实现真正无状态的单点登录（单点等第二种方法：JWT）</h3><h3 id="3-（刘宏伟）用户登录对接QQ、微信、微博等三方登录"><a href="#3-（刘宏伟）用户登录对接QQ、微信、微博等三方登录" class="headerlink" title="3.（刘宏伟）用户登录对接QQ、微信、微博等三方登录"></a>3.（刘宏伟）用户登录对接QQ、微信、微博等三方登录</h3><p><a target="_blank" rel="noopener" href="https://open.weixin.qq.com/connect/qrconnect">https://open.weixin.qq.com/connect/qrconnect</a>?</p>
<p><strong>appid</strong>=wx827225356b689e24&amp;（到官方注册的应用标识，标识开发者）</p>
<p><strong>redirect_uri</strong>=<a target="_blank" rel="noopener" href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a></p>
<p>参考博客：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/12271345.html">https://www.cnblogs.com/xiaonq/p/12271345.html</a></p>
<p><img src="assets/1582081967543.png" alt="1582081967543"></p>
<h3 id="4-（苗雨露）基于-Django-的后台管理平台，采用-RBAC-权限管理机制"><a href="#4-（苗雨露）基于-Django-的后台管理平台，采用-RBAC-权限管理机制" class="headerlink" title="4.（苗雨露）基于 Django 的后台管理平台，采用 RBAC 权限管理机制"></a>4.（苗雨露）基于 Django 的后台管理平台，采用 RBAC 权限管理机制</h3><ul>
<li>用户表、角色表、权限表<ul>
<li>用户表：账号、姓名、邮箱、添加时间、最后登录时间、账号是否禁止登录</li>
<li>角色表：商品管理员、订单管理员、超级管理员</li>
<li>资源列表：资源名称（项目模块名称），资源路径（后台路由）<ul>
<li>资源分类：商品模块、订单模块、营销模块、权限模块、内容模块、其他模块</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-RBAC角色权限管理机制实现思路"><a href="#1-RBAC角色权限管理机制实现思路" class="headerlink" title="1. RBAC角色权限管理机制实现思路"></a>1. RBAC角色权限管理机制实现思路</h3><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 面向资源编程</span>
https<span class="token punctuation">:</span><span class="token operator">//</span>www<span class="token punctuation">.</span>shiyanlou<span class="token punctuation">.</span>com<span class="token operator">/</span>v1<span class="token operator">/</span>books<span class="token operator">/</span>        <span class="token comment" spellcheck="true"># 请求后端 books书籍表中数据</span>
    get
    post
<span class="token comment" spellcheck="true"># 用户表</span>
<span class="token comment" spellcheck="true"># 角色表</span>
<span class="token comment" spellcheck="true"># 权限表</span>
get<span class="token operator">/</span>post<span class="token operator">/</span>put<span class="token operator">/</span>delete 对应关系</code></pre>
<ul>
<li>所有权限的本质是对数据库中表中数据增删改查的操作</li>
<li>而这些增删改查的操作是通过前端不同路由，通过get、post、put、delete方法操作数据库的</li>
<li>对权限的控制，最简单的方法就是判断当前用户是否可以对指定路由请求操作的权限</li>
<li>把角色和这个角色能够访问的 url 和 请求方式进行关联（因为正是的业务逻辑用户权限划分力度可能非常细致）</li>
<li>再简单的业务逻辑中这一张表就是权限表</li>
</ul>
<table>
<thead>
<tr>
<th>路由 资源(可能对应的是后端路由的 name名称，可以通过name名称解析出对应路由)</th>
<th>请求方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://www.shiyanlou.com/v1/books/">https://www.shiyanlou.com/v1/books/</a></td>
<td>get</td>
<td>判断用户是否可以查询books表中数据</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.shiyanlou.com/v1/books/">https://www.shiyanlou.com/v1/books/</a></td>
<td>post</td>
<td>判断用户是否可以添加books表中数据</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.shiyanlou.com/v1/books/">https://www.shiyanlou.com/v1/books/</a></td>
<td>put</td>
<td>判断用户是否可以更新books表中数据</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.shiyanlou.com/v1/books/">https://www.shiyanlou.com/v1/books/</a></td>
<td>delete</td>
<td>判断用户是否可以删除books表中数据</td>
</tr>
</tbody></table>
<ul>
<li>后端如何判断用户权限<ul>
<li>用户发送求方法 <a target="_blank" rel="noopener" href="https://www.shiyanlou.com/v1/books/">https://www.shiyanlou.com/v1/books/</a> 的url</li>
<li>后端首先查询时哪一个用户，然后查询当前用户的角色</li>
<li>最后判断这个角色是否可以访问 <a target="_blank" rel="noopener" href="https://www.shiyanlou.com/v1/books/">https://www.shiyanlou.com/v1/books/</a> 的对应方法即可</li>
<li>如果这个角色有权限访问这个url就返回数据，不能访问就返回 401状态码</li>
</ul>
</li>
</ul>
<h3 id="5-（秦梦奇）结合DRF框架提供标准RESTful-API接口"><a href="#5-（秦梦奇）结合DRF框架提供标准RESTful-API接口" class="headerlink" title="5.（秦梦奇）结合DRF框架提供标准RESTful API接口"></a>5.（秦梦奇）结合DRF框架提供标准RESTful API接口</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/10053234.html">https://www.cnblogs.com/xiaonq/p/10053234.html</a></p>
<p><span style="color: red"> RESTful不是一种技术，而是一种接口规范，主要规范包括：1.请求方式、2.状态码、3、url规范、4、传参规范</span></p>
<ul>
<li><p>请求方式method</p>
<ul>
<li>GET      ：从服务器取出资源（一项或多项）</li>
<li>POST    ：在服务器新建一个资源</li>
<li>PUT      ：在服务器更新资源（客户端提供改变后的完整资源）</li>
<li>PATCH  ：在服务器更新资源（客户端提供改变的属性）</li>
<li>DELETE ：从服务器删除资源</li>
</ul>
</li>
<li><p><strong>状态码</strong></p>
</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token triple-quoted-string string">'''1. 2XX请求成功'''</span>
<span class="token comment" spellcheck="true"># 200 请求成功，一般用于GET与POST请求</span>
<span class="token comment" spellcheck="true"># 201 Created - [POST/PUT/PATCH]：用户新建或修改数据成功。</span>
<span class="token comment" spellcheck="true"># 202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）</span>
<span class="token comment" spellcheck="true"># 204 NO CONTENT - [DELETE]：用户删除数据成功。</span>
<span class="token triple-quoted-string string">'''2. 3XX重定向'''</span>
<span class="token comment" spellcheck="true"># 301 NO CONTENT - 永久重定向</span>
<span class="token comment" spellcheck="true"># 302 NO CONTENT - 临时重定向</span>
<span class="token triple-quoted-string string">'''3. 4XX客户端错误'''</span>
<span class="token comment" spellcheck="true"># 400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误。</span>
<span class="token comment" spellcheck="true"># 401 Unauthorized - [*]：表示用户没有权限（令牌、用户名、密码错误）。</span>
<span class="token comment" spellcheck="true"># 403 Forbidden - [*] 表示用户得到授权（与401错误相对），但是访问是被禁止的。</span>
<span class="token comment" spellcheck="true"># 404 NOT FOUND - [*]：用户发出的请求针对的是不存在的记录。</span>
<span class="token comment" spellcheck="true"># 406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。</span>
<span class="token comment" spellcheck="true"># 410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。</span>
<span class="token comment" spellcheck="true"># 422 Unprocesable entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。</span>
<span class="token triple-quoted-string string">'''4. 5XX服务端错误'''</span>
<span class="token comment" spellcheck="true"># 500 INTERNAL SERVER ERROR - [*]：服务器内部错误，无法完成请求</span>
<span class="token comment" spellcheck="true"># 501 Not Implemented     服务器不支持请求的功能，无法完成请求</span></code></pre>
<ul>
<li><p>面向资源编程： 路径，视网络上任何东西都是资源，均使用名词表示（可复数）</p>
<ul>
<li>所有请求实际操作的都是数据库中的表，每一个表当做一个资源</li>
<li>资源是一个名称，所以RESTful规范中URL只能有名称或名词的复数形式</li>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/zoos">https://api.example.com/v1/zoos</a></li>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/animals">https://api.example.com/v1/animals</a></li>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/employees">https://api.example.com/v1/employees</a></li>
</ul>
</li>
<li><p>过滤，通过在url上传参的形式传递搜索条件</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/zoos?limit=10%EF%BC%9A%E6%8C%87%E5%AE%9A%E8%BF%94%E5%9B%9E%E8%AE%B0%E5%BD%95%E7%9A%84%E6%95%B0%E9%87%8F">https://api.example.com/v1/zoos?limit=10：指定返回记录的数量</a></li>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/zoos?offset=10%EF%BC%9A%E6%8C%87%E5%AE%9A%E8%BF%94%E5%9B%9E%E8%AE%B0%E5%BD%95%E7%9A%84%E5%BC%80%E5%A7%8B%E4%BD%8D%E7%BD%AE">https://api.example.com/v1/zoos?offset=10：指定返回记录的开始位置</a></li>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/zoos?page=2&amp;per_page=100%EF%BC%9A%E6%8C%87%E5%AE%9A%E7%AC%AC%E5%87%A0%E9%A1%B5%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%AF%8F%E9%A1%B5%E7%9A%84%E8%AE%B0%E5%BD%95%E6%95%B0">https://api.example.com/v1/zoos?page=2&amp;per_page=100：指定第几页，以及每页的记录数</a></li>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/zoos?sortby=name&amp;order=asc%EF%BC%9A%E6%8C%87%E5%AE%9A%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E6%8C%89%E7%85%A7%E5%93%AA%E4%B8%AA%E5%B1%9E%E6%80%A7%E6%8E%92%E5%BA%8F%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%8E%92%E5%BA%8F%E9%A1%BA%E5%BA%8F">https://api.example.com/v1/zoos?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序</a></li>
<li><a target="_blank" rel="noopener" href="https://api.example.com/v1/zoos?animal_type_id=1%EF%BC%9A%E6%8C%87%E5%AE%9A%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6">https://api.example.com/v1/zoos?animal_type_id=1：指定筛选条件</a></li>
</ul>
</li>
</ul>
<blockquote>
<h4 id="django的DRF"><a href="#django的DRF" class="headerlink" title="django的DRF"></a>django的DRF</h4></blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/10987889.html">https://www.cnblogs.com/xiaonq/p/10987889.html</a></p>
<ul>
<li>认证</li>
<li>权限</li>
<li>序列化</li>
<li>版本号</li>
<li>限流</li>
</ul>
<p><strong>要求：对照上面的博客把，认证，权限，序列化</strong></p>
<h3 id="6-（张汇森）借助xterm-js、paramiko、Dwebsocket、SSH完成WebSSH在线编程"><a href="#6-（张汇森）借助xterm-js、paramiko、Dwebsocket、SSH完成WebSSH在线编程" class="headerlink" title="6.（张汇森）借助xterm.js、paramiko、Dwebsocket、SSH完成WebSSH在线编程"></a>6.（张汇森）借助xterm.js、paramiko、Dwebsocket、SSH完成WebSSH在线编程</h3><p>websocket：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/12238651.html">https://www.cnblogs.com/xiaonq/p/12238651.html</a></p>
<p>webssh：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/12243024.html">https://www.cnblogs.com/xiaonq/p/12243024.html</a></p>
<blockquote>
<h4 id="1-什么是WebSSH"><a href="#1-什么是WebSSH" class="headerlink" title="1.什么是WebSSH?"></a>1.<strong>什么是WebSSH?</strong></h4></blockquote>
<ul>
<li>webssh 泛指一种技术可以在网页上实现一个 SSH 终端。</li>
<li>ssh终端：用来通过ssh协议，连接服务器进行管理</li>
<li>运维开发方向：堡垒机登录、线上机器管理（因为运维人员不肯能24小时携带电脑）</li>
<li>在线编程：提供一个编程环境</li>
</ul>
<blockquote>
<h4 id="2-websocket-3w1h"><a href="#2-websocket-3w1h" class="headerlink" title="2.websocket(3w1h)"></a>2.websocket(3w1h)</h4></blockquote>
<ul>
<li><strong>什么是websocket</strong><ul>
<li>webSocket是一种在单个TCP连接上进行全双工通信的协议</li>
<li>客户端和服务器之间的数据交换变得更加简单，<strong>允许服务端主动向客户端推送数据</strong>。</li>
<li>浏览器和服务器只需要完成一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输</li>
</ul>
</li>
<li><strong>websocket与http区别</strong><ul>
<li>http请求建立连接只能发送一次请求,不能有服务器端主动向客户端发送请求</li>
<li>websocket建立的长连接，一次连接，后续一直通信，这样节省资源，可以有客户端发送请求给服务器端</li>
</ul>
</li>
<li><strong>远古时期解决方案就是轮询</strong><ul>
<li>客户端以设定的时间间隔周期性地向服务端发送请求，频繁地查询是否有新的数据改动（浪费流量和资源）</li>
</ul>
</li>
<li><strong>webSocket应用场景？</strong><ul>
<li><strong>聊天软件：</strong>最著名的就是微信，QQ，这一类社交聊天的app</li>
<li><strong>弹幕：</strong>各种直播的弹幕窗口</li>
<li><strong>在线教育：</strong>可以视频聊天、即时聊天以及其与别人合作一起在网上讨论问题…</li>
</ul>
</li>
<li><strong>websocket原理</strong><ul>
<li>websocket首先借助http协议（通过在http头部设置属性，请求和服务器进行协议升级，升级协议为websocket的应用层协议）</li>
<li>建立好和服务器之间的数据流，数据流之间底层还是依靠TCP协议；</li>
<li>websocket会接着使用这条建立好的数据流和服务器之间保持通信；</li>
<li>由于复杂的网络环境，数据流可能会断开，在实际使用过程中，我们在onFailure或者onClosing回调方法中，实现重连</li>
</ul>
</li>
<li>websocket<strong>实现心跳检测的思路</strong><ul>
<li>通过setInterval定时任务每个3秒钟调用一次reconnect函数</li>
<li>reconnect会通过socket.readyState来判断这个websocket连接是否正常</li>
<li>如果不正常就会触发定时连接，每4s钟重试一次，直到连接成功</li>
<li>如果是网络断开的情况下，在指定的时间内服务器端并没有返回心跳响应消息，因此服务器端断开了。</li>
<li>服务断开我们使用ws.close关闭连接，在一段时间后，可以通过 onclose事件监听到。</li>
</ul>
</li>
<li>实现聊天功能</li>
</ul>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 后端的django代码</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
<span class="token keyword">from</span> dwebsocket<span class="token punctuation">.</span>decorators <span class="token keyword">import</span> accept_websocket<span class="token punctuation">,</span>require_websocket
<span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> HttpResponse


<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>

<span class="token keyword">from</span> dwebsocket<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>default<span class="token punctuation">.</span>websocket <span class="token keyword">import</span> DefaultWebSocket  <span class="token comment" spellcheck="true"># request.websocket就是DefaultWebSocket对象</span>

tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment" spellcheck="true"># 只有加了这个装饰器，这个视图函数才能处理websocket请求</span>
@accept_websocket
<span class="token keyword">def</span> <span class="token function">echo</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> request<span class="token punctuation">.</span>is_websocket<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true">#判断是不是websocket连接</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true">#如果是普通的http方法</span>
            message <span class="token operator">=</span> request<span class="token punctuation">.</span>GET<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span>
            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span>message<span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">'index.html'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">'''1.实现消息推送'''</span>
        tmp<span class="token punctuation">.</span>append<span class="token punctuation">(</span>request<span class="token punctuation">.</span>websocket<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 把所有连接的websocket连接都加入列表中</span>
        <span class="token comment" spellcheck="true">#  request.websocket = &lt;dwebsocket.backends.default.websocket.DefaultWebSocket object at 0x00000272E69A4320></span>
        <span class="token comment" spellcheck="true"># failed:Invalid frame header：你的视图没有阻塞，请求过一次后服务器端就关闭连接了</span>
        <span class="token comment" spellcheck="true"># 所以使用for循环 request.websocket 对象就会调用 __iter__()方法，利用迭代器进行阻塞</span>
        <span class="token keyword">for</span> message <span class="token keyword">in</span> request<span class="token punctuation">.</span>websocket<span class="token punctuation">:</span>
            <span class="token keyword">for</span> ws <span class="token keyword">in</span> tmp<span class="token punctuation">:</span>
                ws<span class="token punctuation">.</span>send<span class="token punctuation">(</span>message<span class="token punctuation">)</span>

        <span class="token triple-quoted-string string">'''2.实现聊天室思路'''</span>
        <span class="token comment" spellcheck="true"># d = {}                                # 使用了一个dict来保存数据，</span>
        <span class="token comment" spellcheck="true"># d['zhangsan'] = request.websocket     # key值是用户身份，value值是dict类型的{username:websocket}。</span>
        <span class="token comment" spellcheck="true"># d['zhangsan'].send(message)           # 发送消息到客户端</span>
        <span class="token comment" spellcheck="true"># d['lisi'].send(message)   ==>  request.websocket.send(message)</span>

        <span class="token comment" spellcheck="true"># 这只是个思路，如果正式使用的话，肯定会对group封装，也不会只保存在内存中，需要保存到redis中去</span>
        <span class="token comment" spellcheck="true"># 并且对每个websocket对象设置有效期，过期清除，避免长期挂起状态消耗系统资源等</span></code></pre>
<pre class=" language-html"><code class="language-html"># 前端VUE代码
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>send<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>发消息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token string">"ws://127.0.0.1:8000/echo?username=zhangsan&amp;token=xxxx"</span><span class="token punctuation">,</span>
        socket<span class="token punctuation">:</span><span class="token string">""</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mounted <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// 初始化</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      init<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>WebSocket<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"您的浏览器不支持socket"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">// 实例化socket</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">)</span>
          <span class="token comment" spellcheck="true">// 监听socket连接</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span>onopen <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>open
          <span class="token comment" spellcheck="true">// 监听socket错误信息</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span>onerror <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>error
          <span class="token comment" spellcheck="true">// 监听socket消息</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>getMessage
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      open<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"socket连接成功"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      error<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"连接错误"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      getMessage<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>data<span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">// 打印后台返回的数据</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      send<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token string">'hahahahhahaha'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">// 发送给后台的数据</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      close<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"socket已经关闭"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    destroyed <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// 销毁监听</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>socket<span class="token punctuation">.</span>onclose <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>close
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">

</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>
<h3 id="7-（马文龙）redis集群实现秒杀和解决超卖问题"><a href="#7-（马文龙）redis集群实现秒杀和解决超卖问题" class="headerlink" title="7.（马文龙）redis集群实现秒杀和解决超卖问题"></a>7.（马文龙）redis集群实现秒杀和解决超卖问题</h3><ul>
<li><p><strong>redis命令：</strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/7919111.html">https://www.cnblogs.com/xiaonq/p/7919111.html</a></p>
</li>
<li><p><strong>redis解决超卖问题：</strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/12328934.html">https://www.cnblogs.com/xiaonq/p/12328934.html</a></p>
</li>
</ul>
<h3 id="8-（杨茂森）集成支付宝、微信、银联等进行聚合支付-怎么保证接口安全"><a href="#8-（杨茂森）集成支付宝、微信、银联等进行聚合支付-怎么保证接口安全" class="headerlink" title="8.（杨茂森）集成支付宝、微信、银联等进行聚合支付(怎么保证接口安全)"></a>8.（杨茂森）集成支付宝、微信、银联等进行聚合支付(怎么保证接口安全)</h3><p>支付宝支付：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/12332990.html">https://www.cnblogs.com/xiaonq/p/12332990.html</a></p>
<ul>
<li><p>相关的资源：appid、支付宝公钥、app公钥、app私钥、django环境</p>
</li>
<li><p>流程</p>
<ul>
<li>生成公钥（app公钥、app私钥）</li>
<li>APP的公钥要上传到沙箱环境，然后我们要下载支付宝公钥</li>
</ul>
</li>
<li><p>代码如何实现</p>
<ul>
<li>第一：生成支付的url<ul>
<li>在电脑本地生成公钥、私钥（app公钥、app私钥）</li>
<li>APP的公钥要上传到沙箱环境，然后我们要下载支付宝公钥</li>
<li>提供（实例化Alipay对象）：appid、支付宝公钥、app私钥</li>
<li>提供（拼接付款的url）：订单id、金额、标题、return_url(付款成功的回调接口)、notify_url(付款成功后的异步通知)</li>
</ul>
</li>
<li>第二：主动查询支付结果<ul>
<li>提供（实例化Alipay对象）：appid、支付宝公钥、app私钥</li>
<li>提供一个 订单id就可以查询当前订单支付结果</li>
</ul>
</li>
</ul>
</li>
<li><p>支付宝是如何保证数据安全的（数据传输如何保证安全）</p>
</li>
</ul>
<h3 id="9-（雷超凡）课程加入路径celery触发更新提醒"><a href="#9-（雷超凡）课程加入路径celery触发更新提醒" class="headerlink" title="9.（雷超凡）课程加入路径celery触发更新提醒"></a>9.（雷超凡）课程加入路径celery触发更新提醒</h3><ul>
<li><p>celery原理</p>
</li>
<li><p>celery应用场景</p>
<ul>
<li>异步任务<ul>
<li>发邮件、发送消息</li>
<li>自动化工单中耗时任务</li>
<li>所有需要异步处理的请求都可以</li>
</ul>
</li>
<li>定时任务<ul>
<li>工单系统定时获取超时工单进行延时报警</li>
<li>对过期会员进行清理</li>
</ul>
</li>
</ul>
</li>
<li><p>celery的场景（生产者消费者）可以使用多线程解决吗</p>
<ul>
<li>前端发送一个请求，执行自动化工单需要半个小时，这时候如果使用多线程页面会等待吗？</li>
</ul>
</li>
</ul>
<h3 id="10-进程"><a href="#10-进程" class="headerlink" title="10.进程"></a>10.进程</h3><ul>
<li><p>进程</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/7905347.html#i3">https://www.cnblogs.com/xiaonq/p/7905347.html#i3</a></p>
<ul>
<li><strong>进程是资源分配的最小单位（ 内存、cpu、网络、io）</strong></li>
<li><strong>一个运行起来的程序就是一个进程</strong><ul>
<li>什么是程序（程序是我们存储在硬盘里的代码）</li>
<li>硬盘（256G）、内存条（8G）</li>
<li>当我们双击图标，打开程序的时候，实际上就是通过I/O操作（读写）内存条里面</li>
<li>内存条就是我们所指的资源</li>
<li>CPU分时<ul>
<li>CPU比你的手速快多了，分时处理每个线程，但是由于太快然你觉得每个线程都是独占cpu</li>
<li>cpu是计算，只有时间片到了，获取cpu，线程真正执行</li>
<li>当你想使用 网络、磁盘等资源的时候，需要cpu的调度</li>
</ul>
</li>
</ul>
</li>
<li><strong>进程具有独立的内存空间，所以没有办法相互通信</strong><ul>
<li>进程如何通信<ul>
<li>进程queue</li>
<li>pipe</li>
<li>managers</li>
<li>RabbitMQ、redis等</li>
</ul>
</li>
</ul>
</li>
<li>为什么需要进程池<ul>
<li>一次性开启指定数量的进程</li>
<li>如果有十个进程，有一百个任务，一次可以处理多少个（一次性只能处理十个）</li>
<li>防止进程开启数量过多导致服务器压力过大</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="11-线程"><a href="#11-线程" class="headerlink" title="11.线程"></a>11.线程</h3><ul>
<li>有了进程为什么还需要线程<ul>
<li>因为进程不能同一时间只能做一个事情</li>
</ul>
</li>
<li>什么是线程<ul>
<li>线程是操作系统调度的最小单位</li>
<li>线程是进程正真的执行者，是一些指令的集合（进程资源的拥有者）</li>
<li>同一个进程下的读多个线程共享内存空间，数据直接访问（数据共享）</li>
<li>为了保证数据安全，必须使用线程锁</li>
</ul>
</li>
<li>GIL全局解释器锁<ul>
<li>在python全局解释器下，保证同一时间只有一个线程运行</li>
<li>防止多个线程都修改数据</li>
</ul>
</li>
<li>线程锁（互斥锁）<ul>
<li>GIL锁只能保证同一时间只能有一个线程对某个资源操作，但当上一个线程还未执行完毕时可能就会释放GIL，其他线程就可以操作了</li>
<li>线程锁本质把线程中的数据加了一把互斥锁<ul>
<li>mysql中共享锁 &amp; 互斥锁<ul>
<li>mysql共享锁：共享锁，所有线程都能读，而不能写</li>
<li>mysql排它锁：排它，任何线程读取这个这个数据的权利都没有</li>
</ul>
</li>
<li>加上线程锁之后所有其他线程，读都不能读这个数据</li>
</ul>
</li>
<li>有了GIL全局解释器锁为什么还需要线程锁<ul>
<li>因为cpu是分时使用的</li>
</ul>
</li>
</ul>
</li>
<li><strong>死锁定义</strong><ul>
<li>两个以上的进程或线程在执行过程中，因争夺资源而造成的一种互相等待的现象，若无外力作用，它们都将无法推进下去</li>
</ul>
</li>
</ul>
<h3 id="12-协程"><a href="#12-协程" class="headerlink" title="12.协程"></a>12.协程</h3><ul>
<li><p>什么是协程</p>
<ul>
<li>协程微线程，纤程，本质是一个单线程</li>
<li>协程能在单线程处理高并发<ul>
<li>线程遇到I/O操作会等待、阻塞，协程遇到I/O会自动切换（剩下的只有CPU操作）</li>
<li>线程的状态保存在CPU的寄存器和栈里而协程拥有自己的空间，所以无需上下文切换的开销，所以快、</li>
</ul>
</li>
<li>为甚么协程能够遇到I/O自动切换<ul>
<li>协程有一个gevent模块(封装了greenlet模块)，遇到I/O自动切换</li>
</ul>
</li>
</ul>
</li>
<li><p>协程缺点</p>
<ul>
<li>无法利用多核资源：<strong>协程的本质是个单线程,它不能同时将 单个CPU 的多个核用上</strong>,协程需要和进程配合才能运行在多CPU上</li>
<li><strong>线程阻塞（Blocking）操作（如IO时）会阻塞掉整个程序</strong></li>
</ul>
</li>
<li><p>协程最大的优点</p>
<ul>
<li>不仅是处理高并发（单线程下处理高并发）</li>
<li>特别节省资源（500日活，用php写需要两百多态机器，但是golang只需要二十多太机器）<ul>
<li>200多台机器一年</li>
<li>二十多天机器一年</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="13-select、epool、pool"><a href="#13-select、epool、pool" class="headerlink" title="13.select、epool、pool"></a>13.select、epool、pool</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/7907871.html">https://www.cnblogs.com/xiaonq/p/7907871.html</a></p>
<ul>
<li><p>I/O的实质是什么？</p>
<ul>
<li>I/O的实质是将硬盘中的数据，或收到的数据实现从内核态 copy到 用户态的过程</li>
<li>本文讨论的背景是Linux环境下的network IO。</li>
<li>比如微信读取本地硬盘的过程<ul>
<li>微信进程会发送一个读取硬盘的请求—-》操作系统</li>
<li>只有内核才能够读取硬盘中的数据—》数据返回给微信程序（看上去就好像是微信直接读取）</li>
</ul>
</li>
</ul>
</li>
<li><p>用户态 &amp; 内核态</p>
<ul>
<li>系统空间分为两个部分，一部分是内核态，一部分是用户态的部分</li>
<li>内核态：内核态的空间资源只有操作系统能够访问</li>
<li>用户态：我们写的普通程序使用的空间</li>
</ul>
</li>
<li><p>select</p>
<ul>
<li>只能处理1024个连接（每一个请求都可以理解为一个连接）</li>
<li>不能告诉用户程序，哪一个连接是活跃的</li>
</ul>
</li>
<li><p>pool</p>
<ul>
<li>只是取消了最大1024个活跃的限制</li>
<li>不能告诉用户程序，哪一个连接是活跃的</li>
</ul>
</li>
<li><p>epool</p>
<ul>
<li>不仅取消了1024这个最大连接限制</li>
<li>而且能告诉用户程序哪一个是活跃的</li>
</ul>
</li>
</ul>
<h3 id="14-（安喻）基于LocalStorage实现离线客户端购物车，减轻服务端压力。"><a href="#14-（安喻）基于LocalStorage实现离线客户端购物车，减轻服务端压力。" class="headerlink" title="14.（安喻）基于LocalStorage实现离线客户端购物车，减轻服务端压力。"></a>14.（安喻）基于LocalStorage实现离线客户端购物车，减轻服务端压力。</h3><ul>
<li>localStorage存储在浏览器本地<ul>
<li>localStorage.setItem(‘key’)</li>
<li>localStorage.getItem(‘key’)</li>
</ul>
</li>
<li>sessionStorage缓存在前页面啦，关闭页面数据就被清除<ul>
<li>sessionStorage.setItem(‘key2’,456)</li>
<li>sessionStorage.getItem(‘key2’)</li>
</ul>
</li>
</ul>
<h3 id="15-（周子贤）基于Redis搭建高可用集群，实现可靠缓存服务即热点数据保存。redis持久化，集群，哨兵，主从，缓存击穿，热点key。"><a href="#15-（周子贤）基于Redis搭建高可用集群，实现可靠缓存服务即热点数据保存。redis持久化，集群，哨兵，主从，缓存击穿，热点key。" class="headerlink" title="15.（周子贤）基于Redis搭建高可用集群，实现可靠缓存服务即热点数据保存。redis持久化，集群，哨兵，主从，缓存击穿，热点key。"></a>15.（周子贤）基于Redis搭建高可用集群，实现可靠缓存服务即热点数据保存。redis持久化，集群，哨兵，主从，缓存击穿，热点key。</h3><ul>
<li><p>redis有哪几种集群</p>
<ul>
<li>主从模式</li>
<li>哨兵模式</li>
<li>codis</li>
</ul>
</li>
<li><p>redis主动同步机制</p>
<ul>
<li><strong>RDB</strong><ul>
<li>全量同步：从服务器把有的数据全部丢弃，让主服务把所有数据全部发给他</li>
</ul>
</li>
<li><strong>AOF</strong><ul>
<li>增量同步：主服务器只发送从服务器缺少的数据</li>
</ul>
</li>
<li><strong>redis主从同步应该采用哪种方式</strong><ul>
<li>主从刚刚连接的时候，进行全量同步；全同步结束后，进行增量同步。</li>
<li>当然，如果有需要，slave 在任何时候都可以发起全量同步。</li>
<li>redis 策略是，无论如何，首先会尝试进行增量同步，如不成功，要求从机进行全量同步。</li>
</ul>
</li>
</ul>
</li>
<li><p>redis主从</p>
<ul>
<li>写主库、读从库，减轻服务器读压力</li>
<li>缺点：但是redis主从不能自动切换master，所以master如果挂掉了，整个集群都不可以写入啦</li>
</ul>
</li>
<li><p>哨兵模式如何解决主从问题</p>
<ul>
<li>当用Redis做主从方案时，假如master宕机，Redis本身无法自动进行主备切换</li>
<li>而Redis-sentinel本身也是一个独立运行的进程，它能监控多个master-slave集群，发现master宕机后能进行自动切换。</li>
</ul>
</li>
<li><p><strong>sentinel原理</strong></p>
<ul>
<li><p>sentinel负责持续监控主节点的健康，当主节挂掉时，自动选择一个最优的从节点切换成主节点</p>
</li>
<li><p>从节点来连接集群时会首先连接sentinel，通过sentinel来查询主节点的地址</p>
</li>
<li><p>当主节点发生故障时，sentinel会将最新的主节点地址告诉客户端，可以实现无需重启自动切换redis</p>
</li>
<li><p>sentinel缺点</p>
<ul>
<li>redis的slave和master数据时完全一样的，但是有个问题，redis数据时存储在内存中</li>
<li>内存空间有限，所以哨兵模式不能处理大的数据量</li>
</ul>
</li>
</ul>
</li>
<li><p>codis</p>
<ul>
<li><p><strong>为什么会出现codis</strong></p>
<ul>
<li>在大数据高并发场景下，单个redis实例往往会无法应对</li>
<li>首先redis内存不易过大，内存太大会导致rdb文件过大，导致主从同步时间过长</li>
<li>其次在CPU利用率中上，单个redis实例只能利用单核，数据量太大，压力就会特别</li>
</ul>
</li>
<li><p><strong>codis部署方案</strong></p>
<ul>
<li>单个codis代理支撑的QPS比较有限，通过启动多个codis代理可以显著增加整体QPS</li>
<li>多codis还能起到容灾功能，挂掉一个codis代理还有很多codis代理可以继续服务</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://img2018.cnblogs.com/blog/1080958/201910/1080958-20191012162231810-1634314001.png" alt="img"></p>
<ul>
<li><strong>codis分片的原理</strong><ul>
<li>codis负责将特定key转发到特定redis实例，codis默认将所有key划分为1024个槽位</li>
<li>首先会对客户端传来的key进行crc32计算hash值，然后将hash后的整数值对1024进行取模，这个余数就是对应的key槽</li>
<li>每个槽位都会唯一映射到后面的多个redis实例之一，codis会在内存中维护槽位和redis实例的映射关系</li>
<li>这样有了上面key对应的槽位，那么它应该转发到那个redis实例就很明确了</li>
<li>槽位数量默认是1024，如果集群中节点较多，建议将这个数值大一些，比如2048,4096</li>
</ul>
</li>
</ul>
<h3 id="16-（贾新柱）使用Elasticsearch全文检索"><a href="#16-（贾新柱）使用Elasticsearch全文检索" class="headerlink" title="16.（贾新柱）使用Elasticsearch全文检索"></a>16.（贾新柱）使用Elasticsearch全文检索</h3><h3 id="17-（王卫正）使用协同过滤算法实现课程推荐"><a href="#17-（王卫正）使用协同过滤算法实现课程推荐" class="headerlink" title="17.（王卫正）使用协同过滤算法实现课程推荐"></a>17.（王卫正）<strong>使用协同过滤算法实现课程推荐</strong></h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/12797571.html">https://www.cnblogs.com/xiaonq/p/12797571.html</a></p>
<ul>
<li><p>什么是协同过滤算法</p>
<ul>
<li>协同过滤推荐算法是诞生最早，并且较为著名的推荐算法，<strong>主要的功能是预测和推荐</strong>。</li>
<li>算法通过对用户历史行为数据的挖掘发现用户的偏好，<strong>基于不同的偏好对用户进行群组划分并推荐品味相似的商品</strong>。</li>
<li>协同过滤推荐算法分为两类，分别是<strong>基于用户的协同过滤算法</strong>(user-based collaboratIve filtering)，和<strong>基于物品的协同过滤算法</strong>(item-based collaborative filtering)。</li>
<li>简单的说就是：人以类聚，物以群分。下面我们将分别说明这两类推荐算法的原理和实现方法。</li>
</ul>
</li>
<li><p>的协同过滤算法</p>
<ul>
<li>协同过滤算法是一种基于关联规则的算法，以购物行为为例。</li>
<li>假设有甲和乙两名用户，有a、b、c三款产品。</li>
<li>如果甲和乙都购买了a和b这两种产品，我们可以假定甲和乙有近似的购物品味。</li>
<li>当甲购买了产品c而乙还没有购买c的时候，我们就可以把c也推荐给乙。</li>
<li>这是一种典型的user-based情况，就是以user的特性做为一种关联。</li>
<li><strong>举例：</strong>　　　　<ul>
<li>1）直觉分析：“用户A/B”都喜欢物品A和物品B，从而“用户A/B”的口味最为相近</li>
<li>2）因此，为“用户A”推荐物品时可参考“用户B”的偏好，从而推荐D</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span style="color: red"> 推荐算法的难点是建立数据模型和人物画像,要根据具体事物的特点来建立</span></p>
<pre><code>举例：
比如我最近买了一个华为手机，如果你最近总给我推荐什么？华为、小米的手机，这就是不合理的，因为手机使用周期很长，我可能一年都不会再有买手机的可能
比如我最近总吃樱桃，那么你可以推送车厘子给我，这种就算比较合理的，因为樱桃智能池两天</code></pre>
<p><span style="color: red"> 推荐算法代码中如何实现</span></p>
<pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 第一步，将数据读取并格式化为字典形式，便于解析,(如果是数据库中数据，直接读取成字典即可)</span>
<span class="token comment" spellcheck="true"># 第二步：借助"欧几里德"算法计算用户相似度（距离）</span>
<span class="token comment" spellcheck="true"># 第三步：计算某个用户与其他用户的相似度</span>
<span class="token comment" spellcheck="true"># 第四步：根据相似度最高的用户喜好商品排序，把相似度最高用户的喜好推荐给当前用户</span></code></pre>
<h3 id="18-（董继伟）使用Supervisor对后台服务和uwsgi操作，降低日常维护成本"><a href="#18-（董继伟）使用Supervisor对后台服务和uwsgi操作，降低日常维护成本" class="headerlink" title="18.（董继伟）使用Supervisor对后台服务和uwsgi操作，降低日常维护成本"></a>18.（董继伟）<strong>使用Supervisor对后台服务和uwsgi操作，降低日常维护成本</strong></h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaonq/p/12359448.html">https://www.cnblogs.com/xiaonq/p/12359448.html</a></p>
<h3 id="19-线上服务发布过程（灰度发布）"><a href="#19-线上服务发布过程（灰度发布）" class="headerlink" title="19.线上服务发布过程（灰度发布）"></a>19.线上服务发布过程（灰度发布）</h3><ul>
<li>如果部署项目的集群数量很大，那么常用灰度发布（比如有三十台后端服务server）<ul>
<li>首先在一台机器上更新我们最新版本的代码，其余29台机器部署的是以前的代码，比较稳定（灰度发布）</li>
<li>更新的那太机器，要看更新后的服务日志，如果用户访问，在监控中没有发现大量的 4xx/5xx错误</li>
<li>证明新代码没问题，就会全量发布到身下的29机器中</li>
</ul>
</li>
<li>docker发布<ul>
<li>docker运行机器服务是非常快速的，你可以把原有的部署在docker中的服务不用停止</li>
<li>我只直接在机器上运行新的代码的docker，只需要在nginx的upstream里调整配置，指向新docker部署的服务即可</li>
<li>完成上面步骤用户流量现在访问的就是新代码docker中服务，旧代码docker中就没有用户流量</li>
<li>自己设定一个观察时间，如果新代码是问的的，可以直接关闭旧代码中的docker服务</li>
</ul>
</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">刘昊</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://rsghll.github.io/2020/10/11/5-xiang-mu-ji-zhu-dian-pou-xi/">https://rsghll.github.io/2020/10/11/5-xiang-mu-ji-zhu-dian-pou-xi/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">刘昊</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Typora/">
                                    <span class="chip bg-color">Typora</span>
                                </a>
                            
                                <a href="/tags/Markdown/">
                                    <span class="chip bg-color">Markdown</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2020/10/11/5-xiang-mu-ji-zhu-dian-pou-xi/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="技术点">
                        
                        <span class="card-title">技术点</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-10-11
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Django/" class="post-category">
                                    Django
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Typora/">
                        <span class="chip bg-color">Typora</span>
                    </a>
                    
                    <a href="/tags/Markdown/">
                        <span class="chip bg-color">Markdown</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/09/28/mian-shi-bi-ji/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="m总结">
                        
                        <span class="card-title">m总结</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            这是你自定义的文章摘要内容，如果这个属性有值，文章卡片摘要就显示这段文字，否则程序会自动截取文章的部分内容作为摘要
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-09-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%9D%83%E9%99%90/" class="post-category">
                                    权限
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Typora/">
                        <span class="chip bg-color">Typora</span>
                    </a>
                    
                    <a href="/tags/Markdown/">
                        <span class="chip bg-color">Markdown</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="/about" target="_blank">mldsh</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/blinkfox" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1181062873@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1181062873" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1181062873" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>








    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":120,"height":300},"mobile":{"show":true,"react":{"opacity":0.7}}});</script></body>

</html>
